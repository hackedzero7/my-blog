<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Responsive Photography App</title>
  
  
  <link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-beta/css/bootstrap.min.css'>
<link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
<link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600'>
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>


<!--swal-->
<script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>


  
</head>
<style>




.container {
  
  margin: 20px auto 20px;
  padding: 0 !important;
  width: 100% !important;
  margin-top: 0px !important;
  
  box-shadow: 0 3px 6px rgba(0,0,0,0.10), 0 3px 6px rgba(0,0,0,0.10);
}

header {
  
  background-image: url("/images/ss.png");
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  max-width: 100%;
  min-height: 350px;
  
 
}

header i {
  position: relative;
  cursor: pointer;
  right: -90%;
  top: 25px;
  font-size: 38px !important;
  color: #fff;
}

@media (max-width:800px) {
  
  header i {
    right: -90%;
  }
  
}


@media (max-width:600px) {
  
  
  header{


    min-height: 200px;
  }
}



main {
      padding: 20px 20px 0px 20px;
}

.left {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

.photo {
  width: 200px;
  height: 200px;
  margin-top: -120px;
  border-radius: 100px;
  border: 4px solid #fff;
}


@media (max-width:990px) {
  .active {
    right: calc(50% - 60px);
    top: 50px;
  } 
}

.name {
  margin-top: 20px;
  font-family: "Open Sans";
  font-weight: 600;
  font-size: 18pt;
  color: #777;
}

.info {
  margin-top: -5px;
  margin-bottom: 5px;
  font-family: 'Montserrat', sans-serif;
  font-size: 11pt;
  color: #aaa;
}

.stats {
  margin-top: 25px;
  text-align: center;
  padding-bottom: 20px;
  border-bottom: 1px solid #ededed;
  font-family: 'Montserrat', sans-serif;
}


.number-stat {
  padding: 0px;
  font-size: 14pt;
  font-weight: bold;
  font-family: 'Montserrat', sans-serif;
  color: #aaa;
}

.desc-stat {
  margin-top: -15px;
  font-size: 10pt;
  color: #bbb;
}

.desc {
  text-align: center;
  margin-top: 25px;
  margin: 25px 40px;
  color: #999;
  font-size: 11pt;
  font-family: "Open Sans";
  padding-bottom: 25px;
  border-bottom: 1px solid #ededed;
}

.social {
  margin: 5px 0 12px 0;
  text-align: center;
  display: inline-block;
  font-size: 20pt;
}

.social i {
  cursor: pointer;
  margin: 0 15px;
}

.social i:nth-child(1)  { color: #4267b2; }
.social i:nth-child(2)  { color: #1da1f2; }
.social i:nth-child(3)  { color: #bd081c; }
.social i:nth-child(4)  { color: #36465d; }

.right {
  padding: 0 25px 0 25px !important;
}

.nav {
  display: inline-flex;
}

.nav li {
  margin: 40px 30px 0 10px;
  cursor: pointer;
  font-size: 13pt;
  text-transform: uppercase;
  font-family: 'Montserrat', sans-serif;
  font-weight: 500;
  color: #888;
}

.nav li:hover, .nav li:nth-child(1)  { 
  color: #999;
  border-bottom: 2px solid #999;
}

.follow {
  position: absolute;
  right: 8%;
  top: 35px;
  font-size: 11pt;
  background-color: #42b1fa;
  color: #fff;
  padding: 8px 15px;
  cursor: pointer;
  transition: all .4s;
  font-family: 'Montserrat', sans-serif;
  font-weight: 400;
}

.follow:hover {
  box-shadow: 0 0 15px rgba(0,0,0,0.2), 0 0 15px rgba(0,0,0,0.2);
}

@media (max-width:990px) {
  
  
  .follow {
    width: 50%;
    margin-left: 25%;
    display: block;
    position: unset;
    text-align: center;
  }
}
.gallery  {
  margin-top: 35px;
}

.gallery div {
  margin-bottom: 30px;
}

.gallery img {
  box-shadow: 0 3px 6px rgba(0,0,0,0.10), 0 3px 6px rgba(0,0,0,0.10);
  width: auto; 
  height: auto;
  cursor: pointer;
  max-width: 100%;
}







.m{
display: flex;

flex-wrap: wrap;



		max-width: 1200px;
margin: auto;
		transition: all 0.1 linear;
		margin-top: 100px;
	
	}

.a{
margin: 20px;
box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;


background: white;

width: 250px;
height: 455px;
margin-bottom: 40px;
border-bottom: 5px solid rgb(30, 178, 30);
}
.a a:hover{
    color:  rgb(30, 178, 30);
}


.a img{


    width: 100%;
    height: 160px;
    transition: transform 1s;
}


.a img:hover{

transform: scale(1.2);

}

.namedate{


    display: flex;
    justify-content: space-around;
    

    
}


.bbb {

    
background-color: #04AA6D;
color: white;
padding: 0px !important;
margin: 0px !important;
border: none !important;
cursor: pointer !important;
width: 50px !important;
height: 20px !important;
font-size: 10px;
}

.postlink{


color: black;
text-decoration: none;

}


</style>














<body>

  <%- include('components/navigation.ejs') %> 
  <div class="container">
  <header>
    <i style="color: black;font-size: 40px;" class="fa fa-camera" aria-hidden="true"></i>
    <input id="file" type="file" name="cover" accept="image/*" hidden>

  </header>
  <main>
    <div class="row">
      <div class="left col-lg-4">
        <div class="photo-left">


          <% if(userprofile){ %> 

            <img class="photo" src="/profiles/<%= userprofile.userimage %> "/>
          <% } else{%> 
            <img class="photo" src="/images/poo.png  "/>
                    <% } %> 

          <div class="active"></div>
        </div>
        <h4 class="name"><%= userdata.name %></h4>
        <p class="info"><% if(addmoredata){ %> <%= addmoredata.occupation %> <% } %>  </p>
        <p class="info"><%= userdata.email %></p>
        <div class="stats" style="display: flex;">
          
          <div class="stat col-xs-4" >
    
<% if(countposts!=='undefined'){ %> 

  <p style="margin-top: -10px;" class="number-stat"><%= countposts %></p> 

  <% } else{%>
    <p class="number-stat">0</p>
    
  <%} %> 

  
          <p class="desc-stat" style="margin-top:-17px;">Uploads</p>
          </div>
          <div class="stat col-xs-4" style="padding-left: 20px;">
              
<% if(userdata.verify){ %> 

         <a href="/verifyaccount" style="text-decoration: none;"><button class="btn btn-success" class="desc-stat" data-toggle="tooltip" data-placement="right" title="verify account by click here">verified </button></a>
<% }else {%>   

  <a href="#" style="text-decoration: none;"><button class="btn btn-danger" class="desc-stat" data-toggle="tooltip" data-placement="right" title="verify account by click here">unverified </button></a>

<% } %> 



          </div>
          <div class="stat col-xs-4" style="padding-left: 20px;">
        
            
      
            <% if(countposts!=='undefined'){ %> 

<% if(countposts<=5){ %> 
  

            <button type="button" data-toggle="tooltip" data-placement="right" title="number of posts less than 5" class="btn btn-secondary" class="desc-stat">level 0 </button>
                  
<% }else if(countposts>5 && countposts<=10){ %>



 
  <button  class="btn btn-success" data-toggle="tooltip" data-placement="right" title="number of posts greater than 5 and less than 10" class="desc-stat">level 1</button>

<% }else {%>

  <button class="btn btn-success" data-toggle="tooltip" data-placement="right" title="number of posts less than 10" class="desc-stat">pro level</button>

<% } %>

<% } %>           
 

          </div>
        </div>
        <p class="desc"><%if(addmoredata){ %> <%= addmoredata.about %>   <% } %>  </p>
        <div class="social">
          <i class="fa fa-facebook-square" aria-hidden="true"></i>
          <i class="fa fa-twitter-square" aria-hidden="true"></i>
          <i class="fa fa-pinterest-square" aria-hidden="true"></i>
          <i class="fa fa-tumblr-square" aria-hidden="true"></i>
        </div>
      </div>
<div class="right col-lg-8">
        <ul class="nav">
          <li>Recent Blogs</li>
          </ul>
      
        <div class="row gallery">
      
       



        <!--header post boxex -->
        <div class="m">




          <% if(totalposts.length>0) {%>
              
          <% totalposts.forEach(data=>{%>
          
          
          
          
          
          
              <div class="a" style="overflow: hidden;">
              
              <div style="height: 200px;width: 100%; overflow: hidden;">
              
                  <img src="/uploads/<%= data.image %> ">
              </div>
                  <div style="padding: 15px;margin-top: -30px; ">
                      <a class="postlink" href="/postdetail/<%= data._id %> "><h6 ><b><%= data.title.slice(0,22) %>... </b> </h6></a>
                       <p style="font-weight: 100;"> <%= data.post.slice(0,100)%>  </p>
              
          
                       
          
              <button class="bbb" ><a style="text-decoration: none;color: white;" href="/update/<%= data._id %> ">update &rarr;</a></button>
              <button class="bbb" > <a  style="text-decoration: none;color: white;" href="/deletepost/<%= data._id %>"> delete &rarr; </a></button>
          
              
          </div>
              
          
          
          
          
          
          <div class="namedate" style="font-weight: 100;font-family:'Courier New', Courier, monospace;font-style: italic;font-size: 12px; color:black;">
                  
              <div> <p><%= data.uname %> </p></div>
              
              <div><%= data.createdAt.toString().slice(0,15) %> </div>
          
              </div>
          <div><a style="color: #04AA6D; text-decoration: none; margin-left: 20px; font-weight: 500;" href="/postdetail/<%= data._id %> "> Read More</a></div>
          
            
              </div>
              
        
          <%}) %>     
          
        </div>
        
          
          <% if(totalposts.length>=2){ %> 
    
<div style="width: 100%;">
            <a href="/myposts/1"><button class="btn btn" style="background-color: #04AA6D; width: 12%; float: right; color: white;">show all</button></a>


          </div>
<% } %> 





          
              <% }else{ %> 
           
          

  
                <div style=" margin-top: 5px; width: 100%; height:500px; border: 2px dashed #888;text-transform: uppercase;
                font-family: 'Montserrat', sans-serif;
                font-weight: 500;
                color: #888; ">
                <h3 style="font-size: 13pt;width: 100%; text-align: center; margin-top: 250px;">no post yet ,<a style="color: black" href="/createpost">  create here </a></h3>
                
              </div>
               






          <% } %> 
          </div>
          





































































      </div>
  </main>
</div>
  
  









<script>


  const selectImage = document.querySelector('i');
  const inputFile = document.querySelector('#file');
  const imgArea = document.querySelector('header');
  
  selectImage.addEventListener('click', function () {
    inputFile.click();
  })
  
  inputFile.addEventListener('change', function () {
    
    const bb = inputFile.files[0]
    
    
    
    
    if(bb.size < 2000000) {

      var img = new Image();
      const reader = new FileReader();
      reader.onload = ()=> {
      
  img.src = reader.result;






  
  //Validate the File Height and Width.
  img.onload = function () {
    var height = img.height;
    var width = img.width;

    

    if(width>1200 && (height<=1000 && height>=250 )) {


document.querySelector('header').style.backgroundImage = `url(${img.src})`;




}else{ 



Swal.fire({
  icon: 'error',
  title: 'Oops...',
  text: 'Image size should 1200 and 300!',
 
})

  }


  }













      }
      
      reader.readAsDataURL(bb);
    } else {
      alert("Image size more than 2MB");
    }
  })






  $(function () {
  $('[data-toggle="tooltip"]').tooltip()
})

      </script>
  	

</body>
</html>